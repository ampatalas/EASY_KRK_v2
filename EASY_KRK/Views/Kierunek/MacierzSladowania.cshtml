@model EASY_KRK.Models.MacierzSladowaniaViewModel

@{
    ViewBag.Title = "Macierz śladowania";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Macierz powiązania obszarowych efektów kształcenia z kierunkowymi efektami kształcenia</h2>

@if (Model.KEKI == null)
{
     <p>
       Nie wybrano programu kształcenia.
    </p>
}
else
{
    <table class="table-bordered">
        <tr>

            <th>
                KEK
            </th>
            <th>
                Efekt kształcenia
            </th>
            <th>
                MEKI
            </th>
            <th>
                Przedmioty
            </th>
        </tr>

        @foreach (var kek in Model.KEKI)
        {
            <tr>
                <td>
                    @kek.Kod
                </td>
                <td>
                    @kek.Opis
                </td>
                <td style="width:130px">

                    @foreach (var slad in Model.Sladowania.ToList().FindAll(s => s.KEK == kek))
                    {
                        @Html.Raw(slad.MEK.Kod+ " |");
                        @Html.ActionLink("Usuń", "UsunMek", new { idKek = kek.IdKEK, idMek = slad.MEK.IdMEK});
                        @Html.Raw("<br />");
                    }

                    @Html.ActionLink(" ", "DodajMek", new { idKek = kek.IdKEK }, new {title = "Dodaj", style = "background: url('" + Url.Content("~/images/add_btn.png") + "') no-repeat center right; display:block; height:20px; width:20px;" })
                </td>
                <td style="width:130px">
                    @foreach (var kekp in Model.KEKIPrzedmiotow.ToList().FindAll(k => k.KEK == kek))
                    {
                        @Html.Raw(kekp.Przedmiot.KodPrzedmiotu);
                        @Html.ActionLink("Usuń", "UsunPrzedmiot", new { idKek = kek.IdKEK, idPrzedm = kekp.Przedmiot.IdPrzedmiotu });
                        @Html.Raw("<br />");
                    }
                    @Html.ActionLink(" ", "DodajPrzedmiot", new { idKek = kek.IdKEK }, new { title = "Dodaj", style = "background: url('" + Url.Content("~/images/add_btn.png") + "') no-repeat center right;  display:block; height:20px; width:20px;" })
                </td>
            </tr>
        }

    </table>
}

